import "./chunk-46GTBJOP.js";
import {
  Fragment,
  computed,
  createBaseVNode,
  createBlock,
  createCommentVNode,
  createElementBlock,
  inject,
  nextTick,
  normalizeClass,
  openBlock,
  provide,
  ref,
  renderList,
  renderSlot,
  resolveDynamicComponent,
  toDisplayString,
  watch,
  withCtx,
  withModifiers
} from "./chunk-PM6D776P.js";
import "./chunk-2GTGKKMZ.js";

// node_modules/vue-dataset/dist/vue-dataset.es.js
var p = {
  show: "Show",
  entries: "entries",
  previous: "Previous",
  next: "Next",
  showing: "Showing",
  showingTo: "to",
  showingOf: "of",
  showingEntries: "entries"
};
var V = "...";
function z(t, n, s) {
  let e;
  return function() {
    const r = this, o = arguments;
    clearTimeout(e), s && !e && t.apply(r, o), e = setTimeout(function() {
      e = null, s || t.apply(r, o);
    }, n);
  };
}
function O(t) {
  for (const n in t)
    return false;
  return true;
}
function G(t, n) {
  const e = [], r = [];
  let o;
  if (e.push(1), t <= 1)
    return e;
  for (let a = n - 2; a <= n + 2; a++)
    a < t && a > 1 && e.push(a);
  e.push(t);
  for (let a = 0; a < e.length; a++)
    o && (e[a] - o === 2 ? r.push(o + 1) : e[a] - o !== 1 && r.push(V)), r.push(e[a]), o = e[a];
  return r;
}
function W(t, n = {}) {
  const s = [];
  let e;
  const r = t.length;
  return t = t.map(function(o, a) {
    return o[0] === "-" ? (s[a] = -1, o = o.substring(1)) : s[a] = 1, o;
  }), function(o, a) {
    for (e = 0; e < r; e++) {
      const d = t[e], b = n[d] ? n[d](o.value[d]) : o.value[d], m = n[d] ? n[d](a.value[d]) : a.value[d];
      if (b > m)
        return s[e];
      if (b < m)
        return -s[e];
    }
    return 0;
  };
}
function q(t, n) {
  for (const s in n)
    t = t.filter(function(e) {
      const r = e.value;
      for (const o in r)
        if (o === s) {
          if (typeof n[s] == "function")
            return n[s](r[o], r);
          if (n[s] === "" || r[o] === n[s])
            return true;
        }
      return false;
    });
  return t;
}
function H(t, n, s, e) {
  e = String(e).toLowerCase();
  for (const r in s)
    if (t.length === 0 || t.indexOf(r) !== -1) {
      const o = String(s[r]).toLowerCase();
      for (const a in n)
        if (a === r && typeof n[a] == "function") {
          const d = n[a](o, e, s);
          if (d === true)
            return d;
        }
      if (o.indexOf(e) >= 0)
        return true;
    }
  return false;
}
var y = (t, n) => {
  const s = t.__vccOpts || t;
  for (const [e, r] of n)
    s[e] = r;
  return s;
};
var J = {
  props: {
    dsData: {
      type: Array,
      default: () => []
    },
    dsFilterFields: {
      type: Object,
      default: () => ({})
    },
    dsSortby: {
      type: Array,
      default: () => []
    },
    dsSearchIn: {
      type: Array,
      default: () => []
    },
    dsSearchAs: {
      type: Object,
      default: () => ({})
    },
    dsSortAs: {
      type: Object,
      default: () => ({})
    }
  },
  emits: ["update:dsData"],
  /**
   * @param {{
   *   dsData: Record<string, any>[];
   *   dsFilterFields: { [fieldId in string]: (columnValue: any) => boolean | any };
   *   dsSortby: string[];
   *   dsSearchIn: string[];
   *   dsSearchAs: { [id in string]: (columnValue: any, searchString: string) => boolean };
   *   dsSortAs: { [id in string]: (columnValue: any) => any };
   * }} props
   */
  setup(t, { emit: n }) {
    const s = ref(1), e = ref(""), r = ref(10), o = ref(p), a = ref([]), d = (l) => {
      e.value = l;
    }, b = async (l) => {
      r.value = l, await nextTick(), s.value > S.value && m(P.value[P.value.length - 1]);
    }, m = (l) => {
      s.value = l;
    }, T = computed(() => a.value.slice(I.value, D.value)), P = computed(() => G(S.value, s.value)), x = computed(() => a.value.length), S = computed(() => Math.ceil(x.value / r.value)), I = computed(() => (s.value - 1) * r.value), D = computed(() => s.value * r.value);
    return watch(x, (l, g) => {
      m(1);
    }), watch(
      () => [t.dsData, e, t.dsSortby, t.dsFilterFields, t.dsSearchIn, t.dsSearchAs, t.dsSortAs],
      () => {
        let l = [];
        !e.value && !t.dsSortby.length && O(t.dsFilterFields) ? l = t.dsData.map((g, E) => E) : (l = t.dsData.map((g, E) => ({ index: E, value: g })), O(t.dsFilterFields) || (l = q(l, t.dsFilterFields)), e.value && (l = l.filter((g) => H(t.dsSearchIn, t.dsSearchAs, g.value, e.value))), t.dsSortby.length && l.sort(W(t.dsSortby, t.dsSortAs)), l = l.map((g) => g.index)), a.value = l, n(
          "update:dsData",
          l.map((g) => t.dsData[g])
        );
      },
      {
        immediate: true,
        deep: true
      }
    ), provide("dsIndexes", a), provide("search", d), provide("showEntries", b), provide("setActive", m), provide("datasetI18n", o), provide(
      "dsData",
      computed(() => t.dsData)
    ), provide("dsRows", T), provide("dsPages", P), provide("dsResultsNumber", x), provide("dsPagecount", S), provide("dsFrom", I), provide("dsTo", D), provide("dsPage", s), {
      dsIndexes: a,
      dsShowEntries: r,
      dsResultsNumber: x,
      dsPage: s,
      dsPagecount: S,
      dsFrom: I,
      dsTo: D,
      dsRows: T,
      dsPages: P,
      search: d,
      showEntries: b,
      setActive: m
    };
  }
};
function Q(t, n, s, e, r, o) {
  return renderSlot(t.$slots, "default", {
    ds: {
      dsIndexes: e.dsIndexes,
      dsShowEntries: e.dsShowEntries,
      dsResultsNumber: e.dsResultsNumber,
      dsPage: e.dsPage,
      dsPagecount: e.dsPagecount,
      dsFrom: e.dsFrom,
      dsTo: e.dsTo,
      dsData: s.dsData,
      dsRows: e.dsRows,
      dsPages: e.dsPages,
      search: e.search,
      showEntries: e.showEntries,
      setActive: e.setActive
    }
  });
}
var ge = y(J, [["render", Q]]);
var U = {
  setup() {
    const t = inject("dsResultsNumber"), n = inject("dsFrom"), s = inject("dsTo"), e = computed(() => t.value !== 0 ? n.value + 1 : 0), r = computed(() => s.value >= t.value ? t.value : s.value);
    return {
      datasetI18n: inject("datasetI18n"),
      dsResultsNumber: t,
      showing: e,
      showingTo: r
    };
  }
};
function X(t, n, s, e, r, o) {
  return openBlock(), createElementBlock("div", null, toDisplayString(e.datasetI18n.showing) + " " + toDisplayString(e.showing) + " " + toDisplayString(e.datasetI18n.showingTo) + " " + toDisplayString(e.showingTo) + " " + toDisplayString(e.datasetI18n.showingOf) + " " + toDisplayString(e.dsResultsNumber) + " " + toDisplayString(e.datasetI18n.showingEntries), 1);
}
var me = y(U, [["render", X]]);
var Y = {
  props: {
    tag: {
      type: String,
      default: "div"
    }
  },
  setup() {
    const t = computed(() => {
      const n = [];
      for (let s = inject("dsFrom").value; s < inject("dsTo").value; s++)
        n.push(s);
      return n;
    });
    return {
      dsData: inject("dsData"),
      dsRows: inject("dsRows"),
      indexes: t
    };
  }
};
function Z(t, n, s, e, r, o) {
  return openBlock(), createBlock(resolveDynamicComponent(s.tag), null, {
    default: withCtx(() => [
      (openBlock(true), createElementBlock(Fragment, null, renderList(e.dsRows, (a, d) => renderSlot(t.$slots, "default", {
        row: e.dsData[a],
        rowIndex: a,
        index: e.indexes[d]
      })), 256)),
      e.dsRows.length ? createCommentVNode("", true) : renderSlot(t.$slots, "noDataFound", { key: 0 })
    ]),
    _: 3
  });
}
var _e = y(Y, [["render", Z]]);
var $ = {
  setup() {
    const t = ref(V), n = inject("dsPage"), s = inject("dsPagecount"), e = computed(() => n.value === 1), r = computed(() => n.value === s.value || s.value === 0);
    return {
      datasetI18n: inject("datasetI18n"),
      setActive: inject("setActive"),
      dsPages: inject("dsPages"),
      dsPagecount: s,
      dsPage: n,
      morePages: t,
      disabledPrevious: e,
      disabledNext: r
    };
  }
};
var ee = { class: "pagination" };
var te = ["tabindex", "aria-disabled"];
var se = ["onClick"];
var ne = {
  key: 1,
  class: "page-link"
};
var ae = ["tabindex", "aria-disabled"];
function re(t, n, s, e, r, o) {
  return openBlock(), createElementBlock("ul", ee, [
    createBaseVNode("li", {
      class: normalizeClass(["page-item", e.disabledPrevious && "disabled"])
    }, [
      createBaseVNode("a", {
        class: "page-link",
        href: "#",
        tabindex: e.disabledPrevious ? "-1" : null,
        "aria-disabled": e.disabledPrevious ? "true" : null,
        onClick: n[0] || (n[0] = withModifiers((a) => e.setActive(e.dsPage !== 1 && e.dsPagecount !== 0 ? e.dsPage - 1 : e.dsPage), ["prevent"]))
      }, toDisplayString(e.datasetI18n.previous), 9, te)
    ], 2),
    (openBlock(true), createElementBlock(Fragment, null, renderList(e.dsPages, (a, d) => (openBlock(), createElementBlock("li", {
      key: d,
      class: normalizeClass(["page-item", a === e.dsPage && "active", a === e.morePages && "disabled"])
    }, [
      a !== e.morePages ? (openBlock(), createElementBlock("a", {
        key: 0,
        class: "page-link",
        href: "#",
        onClick: withModifiers((b) => e.setActive(a), ["prevent"])
      }, toDisplayString(a), 9, se)) : (openBlock(), createElementBlock("span", ne, toDisplayString(a), 1))
    ], 2))), 128)),
    createBaseVNode("li", {
      class: normalizeClass(["page-item", e.disabledNext && "disabled"])
    }, [
      createBaseVNode("a", {
        class: "page-link",
        href: "#",
        tabindex: e.disabledNext ? "-1" : null,
        "aria-disabled": e.disabledNext ? "true" : null,
        onClick: n[1] || (n[1] = withModifiers((a) => e.setActive(e.dsPage !== e.dsPagecount && e.dsPagecount !== 0 ? e.dsPage + 1 : e.dsPage), ["prevent"]))
      }, toDisplayString(e.datasetI18n.next), 9, ae)
    ], 2)
  ]);
}
var we = y($, [["render", re]]);
var oe = {
  props: {
    dsSearchPlaceholder: {
      type: String,
      default: ""
    },
    wait: {
      type: Number,
      default: 0
    }
  },
  setup(t) {
    const n = inject("search"), s = ref(""), e = z((r) => {
      n(r);
    }, t.wait);
    return {
      dsSearch: s,
      input: e
    };
  }
};
var de = ["placeholder", "value"];
function le(t, n, s, e, r, o) {
  return openBlock(), createElementBlock("input", {
    type: "text",
    placeholder: s.dsSearchPlaceholder,
    class: "form-control",
    value: e.dsSearch,
    onInput: n[0] || (n[0] = (a) => e.input(a.target.value))
  }, null, 40, de);
}
var be = y(oe, [["render", le]]);
var ie = {
  props: {
    dsShowEntries: {
      type: Number,
      default: 10
    },
    dsShowEntriesLovs: {
      type: Array,
      default: () => [
        { value: 5, text: 5 },
        { value: 10, text: 10 },
        { value: 25, text: 25 },
        { value: 50, text: 50 },
        { value: 100, text: 100 }
      ]
    }
  },
  emits: ["changed"],
  setup(t, { emit: n }) {
    const s = inject("showEntries"), e = (r) => {
      n("changed", Number(r.target.value)), s(Number(r.target.value));
    };
    return s(Number(t.dsShowEntries)), {
      datasetI18n: inject("datasetI18n"),
      change: e
    };
  }
};
var ce = { class: "form-inline" };
var ue = ["value"];
var fe = ["value"];
function ve(t, n, s, e, r, o) {
  return openBlock(), createElementBlock("div", ce, [
    createBaseVNode("label", null, toDisplayString(e.datasetI18n.show), 1),
    createBaseVNode("select", {
      value: s.dsShowEntries,
      class: "form-control mr-1 ml-1",
      onChange: n[0] || (n[0] = (...a) => e.change && e.change(...a))
    }, [
      (openBlock(true), createElementBlock(Fragment, null, renderList(s.dsShowEntriesLovs, (a) => (openBlock(), createElementBlock("option", {
        key: a.value,
        value: a.value
      }, toDisplayString(a.text), 9, fe))), 128))
    ], 40, ue),
    createBaseVNode("label", null, toDisplayString(e.datasetI18n.entries), 1)
  ]);
}
var ye = y(ie, [["render", ve]]);
export {
  ge as Dataset,
  me as DatasetInfo,
  _e as DatasetItem,
  we as DatasetPager,
  be as DatasetSearch,
  ye as DatasetShow
};
//# sourceMappingURL=vue-dataset.js.map
